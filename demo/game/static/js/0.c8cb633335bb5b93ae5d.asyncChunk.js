webpackJsonp([0],{"8mJx":function(t,e,s){"use strict";(function(t){var i=s("Dd8w"),o=s.n(i),a=s("mvHQ"),h=s.n(a),n=s("bOdI"),c=s.n(n),r=s("NYxO"),l=s("JPVL"),d=s("OK1g"),m=s("luaM"),u=s("psq8"),p=s.n(u);e.a={props:["jsonUrl","type","catId","catCode"],name:"search",data:function(){var t;return t={isShow:!0,col:0,row:0},c()(t,"isShow",!1),c()(t,"sc",!1),c()(t,"title","搜索"),c()(t,"placeholder",s("BL9n")),c()(t,"initScore",s("R9pJ")),c()(t,"eleList",[]),c()(t,"keyword","yh"),c()(t,"oldF",[0,0]),c()(t,"newF",[]),c()(t,"objindex",[]),c()(t,"listLength",0),c()(t,"round","round"),c()(t,"isRecommend",!0),c()(t,"firstLoad",!0),c()(t,"pageSize",0),c()(t,"pageNum",1),c()(t,"totalPage",0),c()(t,"pageIndex",0),c()(t,"moveDistance",0),c()(t,"time",0),c()(t,"recommendData",[]),c()(t,"itemNo",-1),c()(t,"temporaryItemNo",0),t},components:{kb:l.a},activated:function(){if(console.log("keep-alive:search组件被激活"),this.$store.commit("GET_HTTPRESPONSETIME",(new Date).getTime()),void 0!=this.catCode){this.firstLoad=!0,this.isShow=!1,this.removeCss(),this.keyword="",this.objindex=[0,0],this.col=0,this.row=0,this.oldF=[0,0],this.newF=[0,0],t(".search-right .searchImgs").css("left","0px"),t(".search-right").stop(!1,!0).animate({top:"0px"},300),console.log("激活小键盘"),this.$refs.kbc.keyword="",this.$refs.kbc.getKeyListen(0),this.$refs.kbc.isDel=!1;try{var e=0;this.firstLoad&&(e=this.httpResponseTime-this.startTime,console.log("缓存搜索页第一次加载"),this.firstLoad=!1),console.log("搜索页面加载完成时间："+e+"*******是否第一次加载页面："+this.firstLoad);var s="|"+this.catId+"|",i="|1|"+this.catCode+"|";m.a.loadPage(s,i,2,0,1,this.catId,0,e)}catch(t){console.log(t)}}else console.log("搜索组件复用")},created:function(){this.init()},methods:{init:function(){var t="http://183.131.15.11:8490/?s=22|4&p=yhSearchRecommend&k=1&v=1";this.$route.query.jsonUrl?(t=this.$route.query.jsonUrl+this.behindParams,this.childrenUrl=this.$route.query.jsonUrl):(t+=this.behindParams,this.getRecommendData(t))},getDetail:function(e){var s=this;this.isHTTPS&&e.indexOf("https")<0&&(e=e.replace("http","https")),d.a.get(e).then(function(e){var i=e.data;s.eleList=[],i.forEach(function(t){t.resultList.length>0&&"游戏"==t.categoryName&&(s.pageSize=t.resultNum,s.totalPage=Math.ceil(t.resultNum/8),s.moveDistance=Math.floor(100/s.totalPage),s.eleList.push(t),s.pageNum=1)}),s.$nextTick(function(){t(".search-bar").stop(!1,!0).animate({top:"-1%"}),s.$lazyImages.loadImage()})},function(t){}).catch(function(t){console.log("获取搜索数据失败，搜索关键字："+s.keyword)})},getRecommendData:function(e){var s=this,i=this;this.isHTTPS&&e.indexOf("https")<0&&(e=e.replace("http","https")),d.a.get(e).then(function(e){console.log("数据"+h()(e.data)),s.recommendData=[],s.recommendData=e.data.hotAssetList,i.totalPage=Math.ceil(e.data.hotAssetList.length/4),i.moveDistance=Math.floor(100/i.totalPage),i.eleList.push(e.data.hotAssetList),i.pageNum=1,i.$nextTick(function(){t(".search-bar").stop(!1,!0).animate({top:"-1%"}),i.$lazyImages.loadImage()})},function(t){}).catch(function(t){console.log("获取搜索数据失败，搜索关键字："+i.keyword)})},keyCode:function(t){if("down"==t)this.down();else if("up"==t)this.up();else if("left"==t)this.left();else if("right"==t)this.right();else if("KeyEnter"==t){var e="";e=this.isRecommend?this.recommendData[this.itemNo].jsonUrl:this.eleList[0].resultList[this.col].jsonUrl,console.log("详情页地址："+e),this.$router.push({name:"GamePages",params:{jsonUrl:e,catId:this.catId}})}else"KeyBack"==t&&this.KeyBack()},KeyBack:function(){this.pageNum=1,this.$router.go(-1)},down:p.a.debounce(function(){if(this.isRecommend){if(this.itemNo+4>this.recommendData.length-1)return;t(".recommendTemp").stop(!1,!0).animate({top:"-=265px"}),this.itemNo+=4,this.pageNum++,t(".search-bar").stop(!1,!0).animate({top:"+="+this.moveDistance+"%"})}else this.col>3&&this.pageNum<this.totalPage?(this.removeCss(),this.pageIndex=8*this.pageNum,this.pageNum++,this.getNextPage(this.pageIndex,8),t(".search-bar").stop(!1,!0).animate({top:"+="+this.moveDistance+"%"})):this.col<4&&this.col+4<=this.eleList[0].resultList.length-1&&(this.removeCss(),this.col+=4,this.addCss())},300),up:p.a.debounce(function(){if(this.isRecommend){if(this.itemNo<4)return;t(".recommendTemp").stop(!1,!0).animate({top:"+=265px"}),this.itemNo-=4,t(".search-bar").stop(!1,!0).animate({top:"-="+this.moveDistance+"%"}),this.pageNum--}else this.col<4&&this.pageNum>1?(this.removeCss(),this.pageNum--,console.log(this.pageNum),this.pageIndex-=8,this.getNextPage(this.pageIndex,8),t(".search-bar").stop(!1,!0).animate({top:"-="+this.moveDistance+"%"})):this.col>3&&(this.removeCss(),this.col-=4,this.addCss())},300),left:p.a.debounce(function(){if(this.isRecommend){if(this.itemNo%4==0)return this.isShow=!1,this.$refs.kbc.getKeyListen(5),this.temporaryItemNo=this.itemNo,void(this.itemNo=-1);this.itemNo--}else{if(0==this.col||4==this.col)return this.removeCss(),this.isShow=!1,void this.$refs.kbc.getKeyListen(5);this.removeCss(),this.col--,this.addCss()}},300),right:p.a.debounce(function(){if(this.isRecommend){if(this.itemNo==this.recommendData.length-1)return;if((this.itemNo+1)%4==0)return;this.itemNo++}else{if(this.col==this.eleList[0].resultList.length-1)return;if(7==this.col)return;this.removeCss(),this.col++,this.addCss()}},300),addCss:function(){t("#b"+this.col).addClass("change");try{if(t("#b"+this.col+" .s-title-name").text().length>=8){var e="#b"+this.col,s=this,i=document.querySelector(e+" .s-title"),o=document.querySelector(e+" .s-title-name"),a=document.querySelector(e+" .s-title-temp");i.style.textOverflow="clip",a.innerHTML=o.innerHTML,this.timer=setInterval(function(){s.Marquee(i,o,a)},50)}}catch(t){console.log(t)}},removeCss:function(){t("#b"+this.col).removeClass("change");try{if(0!=this.timer){clearInterval(this.timer),this.timer=0;var e="#b"+this.col,s=document.querySelector(e+" .s-title");document.querySelector(e+" .s-title-temp").innerHTML="",s.scrollLeft=0,s.style.textOverflow="ellipsis"}}catch(t){console.log(t)}},keepDo:function(t,e,s){if(t)this.keyword=e;else if(this.isRecommend)this.itemNo=this.temporaryItemNo,this.isShow=!0;else if(this.eleList.length>0){this.isShow=!0,this.row=this.oldF[0],this.col=this.oldF[1],this.addCss();try{void 0==this.catCode&&(this.catCode=0),void 0==this.catId&&(this.catId=0);var i="|"+this.catId+"|";m.a.searchResultClick(this.keyword,1,i,"|1|2|",1,this.catId,2,0)}catch(t){console.log(t)}}else this.isShow=!1,this.$refs.kbc.getKeyListen()},getNextPage:function(t,e){var s="http://183.131.15.11:8490/?s=22|4&p=yhSearch&k=1&v=1&actorType=6&word="+this.keyword+"&pindex="+t+"&psize="+e+this.behindParams,i=this;this.isHTTPS&&s.indexOf("https")<0&&(s=s.replace("http","https")),d.a.get(s).then(function(t){var e=t.data;i.eleList=[],e.forEach(function(t){t.resultList.length>0&&"游戏"==t.categoryName&&i.eleList.push(t)}),i.$nextTick(function(){i.$lazyImages.loadImage(),i.col=0,i.addCss()})})},Marquee:function(t,e,s){var i=0;s.offsetWidth-t.scrollLeft<=0?t.scrollLeft=0:(i=t.scrollLeft,t.scrollLeft++,i==t.scrollLeft&&(t.scrollLeft=0))}},watch:{keyword:function(){if(""==this.keyword)this.isRecommend=!0,this.init();else{var t;t="http://183.131.15.11:8490/?s=22|4&p=yhSearch&k=1&v=1&word="+this.keyword+"&pindex=0&psize=8&actorType=6"+this.behindParams,this.isRecommend=!1,this.col=0,this.row=0,this.oldF=[0,0],this.newF=[0,0],this.getDetail(t)}},eleList:function(){if(0==this.eleList.length)try{console.log("没有搜索结果"),void 0==this.catCode&&(this.catCode=0),void 0==this.catId&&(this.catId=0);var t="|"+this.catId+"|";m.a.searchResultClick(this.keyword,2,t,"|1|2|",1,this.catId,2,0)}catch(t){console.log(t)}this.$nextTick(function(){this.$store.commit("GET_HTTPRESPONSETIME",(new Date).getTime());var t=0;if(!this.firstLoad)return"";t=this.httpResponseTime-this.startTime,console.log("搜索页第一次加载"),this.firstLoad=!1,void 0==this.catCode&&(this.catCode=0),void 0==this.catId&&(this.catId=0);var e="|"+this.catId+"|",s="|1|"+this.catCode+"|";m.a.loadPage(e,s,2,0,1,this.catId,0,t)})}},computed:o()({},Object(r.b)(["rootPath","catList","category","behindParams","isHTTPS","startTime","httpRequestTime","httpResponseTime"])),beforeRouteLeave:function(t,e,s){try{console.log("开始时间被重置"+this.startTime);var i;i=(new Date).getTime()-this.httpResponseTime,void 0==this.catCode&&(this.catCode=0),void 0==this.catId&&(this.catId=0);var o="|"+this.catId+"|",a="|1|"+this.catCode+"|";this.$store.commit("GET_STARTTIME",(new Date).getTime()),m.a.closPage(o,a,2,0,1,this.catId,0,i),console.log("页面停留时间："+i+"^^^^^^^focusId:"+this.catId)}catch(t){console.log(t)}finally{s()}}}}).call(e,s("7t+N"))},JPVL:function(t,e,s){"use strict";var i={props:["type"],name:"keyboard",data:function(){return{kcode:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],isShow:!0,position:0,itemNo:0,iskc:0,keyword:"",isDel:!1,eleId:"kb",lastFocus:0}},created:function(){this.addCss()},activated:function(){},methods:{keyCode:function(t){"down"==t?this.down():"up"==t?this.up():"left"==t?this.left():"right"==t?this.right():"KeyEnter"==t?this.KeyEnter():"KeyBack"==t&&this.$router.go(-1)},down:function(){0==this.position?this.itemNo>=30?(this.position=1,this.itemNo=this.iskc=-1):this.itemNo+=6:1==this.position&&(this.removeCss(),this.position=0,this.itemNo=0,this.addCss())},up:function(){0==this.position?this.itemNo<=5?(this.position=1,this.itemNo=this.iskc=-1):this.itemNo-=6:(this.position=0,this.itemNo=this.iskc=33,this.isDel=!1)},left:function(){0!=this.itemNo&&0==this.position&&this.itemNo--},right:function(){var t=this.kcode.length-1;this.itemNo>t||(0==this.position?5==this.itemNo||11==this.itemNo||17==this.itemNo||23==this.itemNo||29==this.itemNo||35==this.itemNo?(this.isShow=!1,this.lastFocus=this.itemNo,this.itemNo=-1,this.$emit("pressDown",this.isShow,this.eleId,"right")):this.itemNo++:(this.isShow=!1,this.isDel=!1,this.lastFocus=0,this.$emit("pressDown",this.isShow,this.eleId,"right")))},KeyEnter:function(){if(0==this.position)this.keyword+=this.kcode[this.itemNo];else if(1==this.position){var t=this.keyword.length-1;this.keyword=this.keyword.substring(0,t)}},KeyBack:function(){},addCss:function(){0==this.position?this.iskc=this.itemNo:this.isDel=!0},removeCss:function(){1==this.position&&(this.isDel=!1)},getKeyListen:function(t){this.isShow=!0,console.log(t),this.itemNo=void 0!=t&&""!=t?t:this.lastFocus,this.position=0}},watch:{itemNo:function(){this.addCss()},keyword:function(){console.log("搜索关键字:"+this.keyword),this.$emit("pressDown",this.isShow,this.keyword,"search")}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"keyboardBox"},[s("div",{staticClass:"k-write"},[s("div",{staticClass:"k-input"},[t._v(t._s(t.keyword))]),t._v(" "),s("div",{staticClass:"k-do"},[s("button",{staticClass:"button",class:{hover:t.isDel}},[t._v("删除")])])]),t._v(" "),s("div",{staticClass:"k-code"},[s("ul",t._l(t.kcode,function(e,i){return s("li",{key:e.id,attrs:{id:"t"+i}},[s("i",{class:{active:i===t.iskc}},[t._v(t._s(e))])])}))]),t._v(" "),t.isShow?s("keyDo",{ref:"keydo",on:{listenKeyCode:t.keyCode}}):t._e()],1)},staticRenderFns:[]};var a=s("VU/8")(i,o,!1,function(t){s("XesK")},"data-v-454e8ab2",null);e.a=a.exports},K9Fu:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("8mJx"),o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("div",{staticClass:"search-left"},[s("p",{staticClass:"serach-title"},[t._v(t._s(t.title))]),t._v(" "),s("kb",{ref:"kbc",on:{pressDown:t.keepDo}}),t._v(" "),s("div",{staticClass:"tip"},[t._v("输入拼音首写字母搜索相关游戏视频")])],1),t._v(" "),s("div",{staticClass:"search-right"},[s("div",{staticClass:"pageSize"},[t._v("第"),s("span",[t._v(t._s(t.pageNum))]),t._v("页")]),t._v(" "),t.isRecommend?[s("div",{staticClass:"recommendWrap"},[s("div",{staticClass:"recommendTemp"},t._l(t.recommendData,function(e,i){return s("div",{key:i,staticClass:"boxWrap",class:t.itemNo==i?"change":""},[s("lazy-image",{attrs:{src:e.elementImg,placeholder:t.placeholder,imgClass:t.round,initScore:t.initScore,title:e.elementName,score:e.score}})],1)}))])]:t._l(t.eleList,function(e,i){return s("div",{key:e.id,staticClass:"search_ul",attrs:{id:"a"+i}},[s("div",{staticClass:"searchImgs"},t._l(e.resultList,function(e,i){return i<8?s("div",{key:e.id,staticClass:"search_img",attrs:{id:"b"+i}},[s("lazy-image",{attrs:{src:e.elementImg,placeholder:t.placeholder,imgClass:t.round,initScore:t.initScore,title:e.elementName,score:e.score}})],1):t._e()}))])}),t._v(" "),t._m(0)],2),t._v(" "),t.isShow?s("keyDo",{ref:"keyDo",on:{listenKeyCode:t.keyCode}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"search-scroll"},[e("div",{staticClass:"search-bar"})])}]};var a=function(t){s("nacY"),s("crS7")},h=s("VU/8")(i.a,o,!1,a,"data-v-5b82cb10",null);e.default=h.exports},XesK:function(t,e){},crS7:function(t,e){},nacY:function(t,e){}});
//# sourceMappingURL=0.c8cb633335bb5b93ae5d.asyncChunk.js.map