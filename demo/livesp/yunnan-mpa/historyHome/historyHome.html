<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>历史收藏页</title>
    <style scoped="historical">
        * {
            margin: 0;
            padding: 0;
            outline: none;
        }

        ul,
        li {
            list-style: none
        }

        img {
            border: none;
            padding: 0;
            border: 0;
            margin: 0;
            clear: both;
        }

        body {
            font-family: "Microsoft YaHei,Arial";
            color: #fff;
            width: 1280px;
            height: 720px;
        }

        .yy-confirm .bg {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background-color: #000;
            opacity: 0.62;
            z-index: 1;
        }

        .btn_num {
            margin-left: -14px;
            float: left;
            width: 815px;
            height: 28px;
            margin-top: 10px;
            margin-bottom: 54px;
        }

        .btn_num p {
            color: #B0D1F7;
            font-size: 20px;
            margin-left: 20px;
            height: 24px;
        }

        .btn_num p span {
            color: #B0D1F7;
            font-size: 20px;
            margin-left: 20px;
            height: 24px;
        }

        .HistoryImg {
            width: 100%;
            height: 100%;
            border-radius: 15px;
            box-sizing: border-box;
        }

        .jiaobiao {
            width: 48px;
            height: 22px;
            background: url(./../index/images/jingxuan.png);
            position: absolute;
            left: 10px;
            top: 10px;
        }

        .yy-confirm .yy-container {
            position: absolute;
            top: 160px;
            left: 360px;
            z-index: 99;
            width: 600px;
            height: 400px;
            border-radius: 20px;
            overflow: hidden;
        }

        .yy-confirm .yy-container .yy-footer {
            background: url(../index/images/category.png) no-repeat;
            background-size: 100% 100%;
            height: 360px;
            box-sizing: border-box;
            border-radius: 20px;
        }

        .yy-btn {
            font-size: 20px;
            border-radius: 14px;
            text-align: center;
            width: 180px;
            float: left;
            margin-top: 150px;
            margin-left: 75px;
            height: 60px;
            line-height: 60px;
            border: 2px white solid;
            background-color: #152F3A;
            color: #ffffff;
        }

        .yy-btn.select-on {
            border: 3px #FFF solid;
            background: url(../index/images/btn.png) no-repeat;
            background-size: 100% 100%;
        }

        .Img {
            width: 125px;
            height: 125px;
            border-radius: 50%;
        }

        .box:after {
            clear: both;
            content: '';
            display: block;
        }

        .historical {
            width: 333px;
            height: 720px;
            background-color: #007F86;
            border-top: 1px solid #007F86;
            float: left;
        }

        .tit {
            width: 220px;
            height: 62px;
            font-size: 44px;
            text-align: center;
            line-height: 62px;
            color: rgba(255, 255, 255, 0.2);
            margin-top: 30px;
            margin-left: 63px;
        }

        .content {
            float: left;
            width: 135px;
            height: 70%;
            background: -webkit-linear-gradient(to bottom, rgba(255, 255, 255, 0.01) 0%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.01) 100%);
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.01) 0%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.01) 100%);
            position: relative;
            margin-top: 39px;
            margin-left: 56px;
        }

        .content.right_con {
            float: left;
            width: 114px;
            height: 70%;
            background: -webkit-linear-gradient(to bottom, rgba(255, 255, 255, 0.01) 0%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.01) 100%);
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.01) 0%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.01) 100%);
            position: relative;
            margin-top: 39px;
            margin-left: 2px;
            overflow: hidden;
        }

        .content ul {
            width: 100%;
            position: absolute;
            left: 0;
            top: 210px;
        }

        .content ul .text_n {
            color: rgba(255, 255, 255, 0.7);
            width: 100%;
            height: 68px;
            font-size: 26px;
            text-align: center;
            line-height: 70px;
        }

        .content .writediv {
            width: 100%;
            height: 68px;
            background: rgba(255, 255, 255, 0.4);
            position: absolute;
            left: 0;
            top: 210px;
            border-radius: 15px;
        }

        .content .changebac {
            background: url(../index/images/btn.png) no-repeat;
            background-size: 100% 100%;
            border: 3px solid #fff;
            box-sizing: border-box;
        }

        .content.active {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid white;
            border-radius: 15px;
        }

        .gunLun {
            width: 6px;
            height: 490px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 5px;
            margin-top: 45px;
            position: absolute;
            left: 1210px;
            top: 100px;
        }

        .hang {
            position: absolute;
            left: 1200px;
            top: 90px;
            font-size: 20px;
        }

        .gunLun .btn_nums {
            width: 10px;
            height: 140px;
            background: white;
            border-radius: 5px;
            text-align: center;
            position: absolute;
            left: -2px;
            top: -10px;
            color: black;
        }

        .removeBorder {
            border: 3px solid white;
            box-sizing: border-box;
        }

        .btn_center {
            width: 780px;
            height: 550px;
            overflow: hidden;
        }

        .imgs.box_border {
            border: 3px solid #ffffff;
            box-sizing: border-box;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.55);

        }

        .his_right {
            width: 880px;
            height: 695px;
            overflow: hidden;
            float: left;
            padding-left: 67px;
            padding-top: 25px;
            background: url(../index/images/category.png) no-repeat;
            background-size: 100% 100%;
        }

        .btn_rem {
            width: 138px;
            height: 50px;
            background: #F1E00E;
            color: black;
            font-size: 20px;
            text-align: center;
            line-height: 50px;
            border-radius: 15px;
            float: left;

        }

        .btn_num {
            margin-left: -14px;
            float: left;
            width: 815px;
            height: 28px;
            margin-top: 10px;
            margin-bottom: 54px;
        }

        .btn_num span {
            color: #B0D1F7;
            font-size: 20px;
            margin-left: 20px;
            height: 24px;
        }

        .his_right ul {
            float: left;
        }

        .imgs {
            width: 161px;
            height: 213px;
            margin-bottom: 65px;
            margin-right: 32px;
            float: left;
            border-radius: 15px;
        }

        .imgss {
            width: 125px;
            height: 125px;
            float: left;
            margin: 40px 60px 110px 0;
            border-radius: 50%;
        }

        .imgss.box_border {
            border: 4px solid #ffffff;
            text-align: center;
            margin-bottom: 100px;
            margin-left: -4px;
            /* box-shadow: 0 10px 20px rgba(0, 0, 0, 0.55); */
            box-shadow: 0 0 15px #fff;
        }

        .his_ul {
            margin-left: 8px;
            display: -webkit-flex;
            /* Safari */
            display: flex;
            flex-wrap: wrap;

        }

        .his_ul li {
            position: relative;
        }

        .imgss p {
            max-width: 125px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            text-align: center;
            width: 100%;
            height: 20px;
        }

        .sprite_img {
            width: 35px;
            height: 35px;
            padding: 5px 2.5px 7px 35px;
            background: url("../index/images/icon.png") no-repeat -35px -245px;
        }

        .text-css {
            text-shadow: 0px 0px 15px #DBC473;
        }

        .word {
            width: 164px;
            font-size: 20px;
            line-height: 25px;
            text-align: center;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .word div {
            display: inline;
        }

        /** 内容css ***/
        .history-connent {
            position: absolute;
            top: 0;
            right: 30px;
            height: 720px;
            width: 905px;
        }

        .top-c {
            font-size: 30px;
            color: #E8F0E1;
            display: none;
            position: absolute;
            top: 325px;
            left: 214px;
        }
    </style>
</head>

<body>
    <div class="box">
        <div class="historical">
            <div class="tit">历史与收藏</div>
            <div class="content active" id="d1">
                <div class="writediv changebac" id="b1"></div>
                <ul class="cul" id="c0">
                    <li class="text_n" id="sc">收藏</li>
                    <li class="text_n" id="jv">历史</li>
                </ul>
            </div>
            <div class="content right_con" id="d2">
                <div class="writediv" id="b2"></div>
                <ul class="cul" id="c1">
                </ul>
            </div>
        </div>
        <div class="his_right">
            <!-- 内容数据 -->
            <div class="history-connent">
                <div class="top-c" id="top-c">还没有学习记录，快去学习吧</div>
                <ul class="middle-box" id="history-connent">
                </ul>
            </div>
            <div class="btn_num">
                <p>全部
                    <span>0</span>&#160&#160个
                </p>
                <p style="display:none;" class="text_none">
                    该版块暂没有收藏，快去看视频收藏吧
                </p>
            </div>
            <div class="btn_center">
                <ul class="his_ul">
                </ul>
            </div>
            <div class="hang"></div>
            <div class="gunLun" style="display: none;">
                <div class="btn_nums"></div>
            </div>
        </div>
        <div class="yy-confirm" style="display: none;">
            <div class="bg"></div>
            <div class="yy-container">
                <div class="yy-footer">
                    <div class="yy-btn make-sure select-on">查看详情
                    </div>
                    <div class="yy-btn cancel">取消收藏
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="../index/js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../index/js/common.js" type="text/javascript" charset="utf-8"></script>
<script src='../index/js/lazyLoad.js'></script>
<script src="../index/js/jquery.cookie.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    var getJson = {
        historyData: function (type, pindex) {
            var url = historylUrl + '/list?version=1&siteId=' + yh.siteId + '&userId=' + yh.userId +
                '&pindex=0&psize=8'
            if (type == 1) {
                url = url + "&collectType=3"
            } else {
                url = url + "&collectType=1,2"
            }
            console.log(url)
            getCollectionList(url, function (response) {
                if (response.code == 200) {
                    if (type == 1) {
                        console.log(response)
                        key.url = response.data.resultList;
                        $('.btn_num p span').html(key.url.length);
                        $('.text_none').hide();
                        key.timese(key.url);
                        rightCenter.init(key.urls);
                    } else {
                        console.log(response)
                        key.url = response.data.resultList;
                        $('.btn_num p span').html(key.url.length);
                        if (key.url.length == 0) {
                            $('.text_none').show();
                        } else {
                            $('.text_none').hide();
                        }
                        key.sendJson(key.url);
                        console.log(key.urls)
                        rightCenter.init(key.urls);
                    }
                }
            }, function (err) {})
        },

    };
    var leftheader = {
        op: 0,
        num: 0,
        itemNo: 0,
        urls: '',
        favinit: function (data) {
            var html = ""
            var y = "text_n"
            for (i in data) {
                html += "<li  class=" + y + "  id='j" + i + "'>" + data[i] + "</li>"
            }
            $("#c1").html(html);
        },
        addBcss: function () {
            $('#b' + (this.op + 1)).addClass('changebac');
            $('#d' + (this.op + 1)).addClass('active');
        },
        removeBcss: function () {
            $('#b' + (this.op + 1)).removeClass('changebac');
            $('#d' + (this.op + 1)).removeClass('active');
        },
        left: function () {
            if (this.op == 1) {
                leftheader.removeBcss();
                this.op--;
                leftheader.addBcss();
            }
        },
        right: function () {
            if (this.op == 0) {
                leftheader.removeBcss();
                this.op++;
                leftheader.addBcss();
            } else {
                if (this.num == 0) {
                    if (!key.urls.length) return;
                } else {
                    if (!key.url.length) return;
                }
                window.Cookies.set('hisHomeName', this.itemNo);
                areaObj = rightCenter;
                rightCenter.addCss();
                leftheader.removeBcss();
            }
        },
        down: function () {
            rightCenter.itemNo = 0;
            rightCenter.time = 0;
            $('.his_ul').css({
                'transition': 'all 0.3s',
                'transform': 'translateY(-' + 556 * rightCenter.time + 'px)'
            });
            $('.btn_nums').css({
                'transition': 'all 0.3s',
                'transform': 'translateY(' + 0 + 'px)'
            });
            if (this.op == 0) {
                this.num++;
                this.itemNo = 0;
                if (this.num > 1) {
                    this.num = 1;
                } else {
                    leftheader.favinit(key.jv);
                    getJson.historyData(this.num, 1);
                    $('#c' + this.op).css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(-' + 70 * this.num + 'px)'
                    });
                    $('#c' + (this.op + 1)).css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(-' + 68 * this.itemNo + 'px)'
                    })
                    key.timese(key.url);
                    rightCenter.init(key.urls);
                }
            } else {
                if (this.num == 0) {
                    this.itemNo++;
                    if (this.itemNo > 1) {
                        this.itemNo = 1
                    } else {
                        $('#c' + this.op).css({
                            'transition': 'all 0.3s',
                            'transform': 'translateY(-' + 68 * this.itemNo + 'px)'
                        })
                        key.sendJson(key.url);
                        rightCenter.init(key.urls);
                        console.log(key.urls)
                    }
                }
            }
        },
        home: function () {
            var innerURL = window.Cookies.get('lastURL');
            window.location.href = innerURL;
        },
        up: function () {
            rightCenter.itemNo = 0;
            rightCenter.time = 0;
            $('.his_ul').css({
                'transition': 'all 0.3s',
                'transform': 'translateY(-' + 556 * rightCenter.time + 'px)'
            });
            $('.btn_nums').css({
                'transition': 'all 0.3s',
                'transform': 'translateY(' + 0 + 'px)'
            });
            if (this.op === 0) {
                this.num--;

                if (this.num < 0) {
                    this.num = 0;
                } else {
                    getJson.historyData(this.num, 2);
                    leftheader.favinit(key.sc);
                    this.itemNo = 0;
                    $('#c' + this.op).css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(-' + 70 * this.num + 'px)'
                    })
                    $('#c' + (this.op + 1)).css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(-' + 68 * this.itemNo + 'px)'
                    })
                }
            } else {
                if (this.num == 0) {
                    this.itemNo--;
                    if (this.itemNo < 0) {
                        this.itemNo = 0;
                    } else {
                        $('#c' + this.op).css({
                            'transition': 'all 0.3s',
                            'transform': 'translateY(-' + 68 * this.itemNo + 'px)'
                        });
                        key.sendJson(key.url);
                        console.log(key.url);
                        console.log(key.urls);
                        rightCenter.init(key.urls);
                    }
                }
            }
        },
        back: function () {
            window.location.href = '../index.html'
        },
    };
    var rightCenter = {
        jsonUrl: '',
        time: 0,
        itemNo: 0,
        pagination: '',
        init: function (data) {
            $('.his_ul').empty();
            if (data.length == 0) {
                $('.text_none').show();
            } else {
                $('.text_none').hide();
            }
            var html = ''
            var imgs = 'imgs';
            for (i in data) {
                html += '<li id="Img' + i +
                    '" class="imgs"><a class="jiaobiao"></a><img src="../index/images/img_loading_160x230.png"  data-img=' +
                    data[i].relateImg +
                    ' class="HistoryImg lazyload"><div class="word"><div class="text">' + data[i].relateTitle +
                    '</div><div class="text-copy"></div></div></li>';
            }
            $(".his_ul").html(html);
            for (var i = 0; i < data.length; i++) {
                if (!data[i].serviceId) {
                    $('#Img' + i + ' a').hide();
                }
            }
            $.imgLazyLoad(); //懒加载
            this.pagination = Math.ceil(data.length / 8);
            $(".hang").html((this.time + 1) + "/" + this.pagination);
            if (this.pagination > 1) {
                $(".gunLun").show();
                $(".hang").show();
            } else {
                $(".gunLun").hide();
                $(".hang").hide();
            }
        },
        back: function () {
            window.location.href = '../index.html';
        },
        cEleOffsetTop: function (ele) {
            var fEleDistance = $(ele).offset();
            var realHeight = fEleDistance.top + 275;
            return realHeight;
        },
        addCss: function () {
            $('#Img' + this.itemNo).addClass('box_border');
            var p_title = $('.his_ul li').eq(this.itemNo).text();
            $('#Img' + this.itemNo).addClass('text-css');
            // css3 wzh
            var title = $(".his_ul li .text")
                .eq(this.itemNo)
                .text();
            if (title.length > 8) {
                var wordBox = document.querySelectorAll(".word")[this.itemNo];
                var text1 = document.querySelectorAll(".text")[this.itemNo];
                var text2 = document.querySelectorAll(".text-copy")[this.itemNo];
                text2.innerHTML = text1.innerHTML;
                wordBox.style.textOverflow = "clip";
                clearInterval(this.timer);
                this.timer = setInterval(function () {
                    if (text2.offsetWidth - wordBox.scrollLeft <= 0) {
                        wordBox.scrollLeft = 1;
                    } else {
                        wordBox.scrollLeft += 2;
                    }
                }, 40);
            }
            setTimeout(function () {
                $.imgLazyLoad();
            }, 310);
        },
        removeCss: function () {
            $('#Img' + this.itemNo).removeClass('box_border');
            $('#Img' + this.itemNo).removeClass('text-css');
            // css3  wzh 
            if (this.timer !== null) {
                document.querySelectorAll(".word")[this.itemNo].style.textOverflow =
                    "ellipsis";
                document.querySelectorAll(".word")[this.itemNo].scrollLeft = 0;
                document.querySelectorAll(".text-copy")[this.itemNo].innerHTML = "";
                clearInterval(this.timer);
            }
            setTimeout(function () {
                $.imgLazyLoad();
            }, 310);

        },
        down: function () {
            var top = rightCenter.cEleOffsetTop('#Img' + this.itemNo);
            if (this.itemNo > key.urls.length - 5) {
                const num1 = Math.floor(key.urls.length / 4) * 4;
                if (this.itemNo >= num1 || num1 === key.urls.length) {
                    return
                } else {
                    rightCenter.removeCss();
                    this.itemNo = key.urls.length - 1;
                    rightCenter.addCss();
                }
            } else {
                rightCenter.removeCss();
                this.itemNo += 4;
                rightCenter.addCss();
            }
            if (this.pagination > 0 && top > 550) {
                this.time++;
                if (this.time > this.pagination) {
                    this.time = this.pagination;
                    return;
                };
                $('.his_ul').css({
                    'transition': 'all 0.3s',
                    'transform': 'translateY(-' + 556 * this.time + 'px)'
                });
                var moveHeight = 400 / this.pagination;
                $('.btn_nums').css({
                    'transition': 'all 0.3s',
                    'transform': 'translateY(' + moveHeight * this.time + 'px)'
                });
                $(".hang").html((this.time + 1) + "/" + this.pagination);
            }
        },
        up: function () {
            $.imgLazyLoad(); //懒加载
            if (this.itemNo < 4) return;
            var top = this.cEleOffsetTop('#Img' + this.itemNo);
            rightCenter.removeCss();
            this.itemNo -= 4;
            rightCenter.addCss();
            if (this.time > 0) {
                if (top < 500) {
                    this.time--;
                    $('.his_ul').css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(-' + 556 * this.time + 'px)'
                    });
                }
                var moveHeight = 400 / this.pagination;
                $('.btn_nums').css({
                    'transition': 'all 0.3s',
                    'transform': 'translateY(' + moveHeight * this.time + 'px)'
                });
                $(".hang").html((this.time + 1) + "/" + this.pagination);
            }
        },
        right: function () {
            if (this.op < 0) return;
            for (var i = 0; i < Math.ceil(key.urls.length / 4); i++) {
                if (this.itemNo == 3 || this.itemNo == 3 + (4 * i) || this.itemNo == key.urls.length - 1)
                    return;
            }
            rightCenter.removeCss();
            this.itemNo++;
            rightCenter.addCss();
        },
        left: function () {
            if (this.itemNo <= 0 || (this.itemNo) % 4 === 0 || this.op == -1) {
                this.isShow = false;
                rightCenter.removeCss();
                areaObj = leftheader;
                leftheader.addBcss();
            } else if (key.urls.length == 0) {
                areaObj = leftheader;
                leftheader.addBcss();
                $('.btn_rem').removeClass('removeBorder');
            } else {
                rightCenter.removeCss();
                $('.btn_rem').removeClass('removeBorder');
                this.itemNo--;
                rightCenter.addCss();
            }
        },
        pageup: function () {
            rightCenter.removeCss();
            this.time--;
            if (this.time < 0) {
                this.time = this.pagination - 1
            }
            this.itemNo = this.time * 8;
            rightCenter.addCss();
            $('.his_ul').css({
                'transition': 'all 0.3s',
                'transform': 'translateY(-' + 556 * this.time + 'px)'
            });
            var moveHeight = 400 / this.pagination;
            $('.btn_nums').css({
                'transition': 'all 0.3s',
                'transform': 'translateY(' + moveHeight * this.time + 'px)'
            });
            $(".hang").html((this.time + 1) + "/" + this.pagination);
        },
        pagedown: function () {
            rightCenter.removeCss();
            this.time++;
            if (this.time > this.pagination - 1) {
                this.time = 0
            }
            this.itemNo = this.time * 8;
            rightCenter.addCss();
            $('.his_ul').css({
                'transition': 'all 0.3s',
                'transform': 'translateY(-' + 556 * this.time + 'px)'
            });
            var moveHeight = 400 / this.pagination;
            $('.btn_nums').css({
                'transition': 'all 0.3s',
                'transform': 'translateY(' + moveHeight * this.time + 'px)'
            });
            $(".hang").html((this.time + 1) + "/" + this.pagination);
        },
        home: function () {
            var innerURL = window.Cookies.get('lastURL');
            window.location.href = innerURL;
        },
        enter: function () {
            if (leftheader.num == 1) {
                //            历史点击
                window.Cookies.set('favColl', '历史');
                window.Cookies.set('favNum', this.itemNo);
                window.Cookies.set('favNums', this.time);
                window.Cookies.set('prePage', "../historyHome/historyHome.html");
                var jsonUrl = encodeURIComponent(key.urls[rightCenter
                        .itemNo]
                    .relateUrl)
                if (key.urls[rightCenter.itemNo].relateLayout == "Detail_News") {
                    window.location = "../seriesDetail/seriesDetail.html?JsonUrl=" + jsonUrl
                } else {
                    window.location = "../singleDetail/singleDetail.html?JsonUrl=" + jsonUrl
                }
            } else if (leftheader.num == 0) {
                areaObj = firm;
                window.Cookies.set('favNum', this.itemNo);
                window.Cookies.set('favNums', this.time);
                $('.yy-confirm').show();
                firm.num = 0;
                $('.cancel').removeClass('select-on');
                $('.make-sure').addClass('select-on');
                //            收藏点击
            }
        },
    };
    var firm = {
        num: 0,
        back: function () {
            $('.yy-confirm').hide();
            areaObj = rightCenter;
        },
        removefun: function (id) {
            for (var index = 0; index < key.url.length; index++) {
                if (id == key.url[index].programId) {
                    return index;
                }
            }
        },
        enter: function () {
            if (this.num == 0) {
                window.Cookies.set('favColl', '收藏');
                window.Cookies.set('prePage', "../historyHome/historyHome.html");
                var jsonUrl = encodeURIComponent(key.urls[rightCenter
                        .itemNo]
                    .relateUrl)
                if (key.urls[rightCenter.itemNo].relateLayout == "Detail_News") {
                    window.location = "../seriesDetail/seriesDetail.html?JsonUrl=" + jsonUrl
                } else {
                    window.location = "../singleDetail/singleDetail.html?JsonUrl=" + jsonUrl
                }
            } else {
                var programId = key.urls[rightCenter.itemNo].programId;
                getJson.removefav(123456, programId, 123456, 123456);
                $('.yy-confirm').hide();
                $('.btn_num p span').html(key.url.length - 1);
                // key.urls.splice(rightCenter.itemNo, 1);
                var iynum = firm.removefun(programId);
                key.url.splice(iynum, 1);
                key.sendJson(key.url);
                rightCenter.init(key.urls);
                setTimeout(function () {
                    if (key.urls.length - 1 < 0) {
                        areaObj = leftheader;
                        leftheader.addBcss();
                    } else {
                        areaObj = rightCenter;
                        if (rightCenter.itemNo == key.urls.length) {
                            rightCenter.itemNo = key.urls.length - 1;
                        }
                        rightCenter.addCss();
                    }
                }, 200);
            }
        },
        right: function () {
            this.num++;
            if (this.num > 1) {
                this.num = 1
            }
            $('.make-sure').removeClass('select-on');
            $('.cancel').addClass('select-on');
        },
        left: function () {
            this.num--;
            if (this.num < 0) {
                this.num = 0;
            }
            $('.cancel').removeClass('select-on');
            $('.make-sure').addClass('select-on');
        },
        home: function () {
            var innerURL = window.Cookies.get('lastURL');
            window.location.href = innerURL;
        },
    };
    var key = {
        sc: {
            1: '电视剧',
            2: '电影',
        },
        jv: {
            1: '全部',
            // 2:'昨天',
            // 3:'前天',
            // 4:'更早时间',
        },
        urls: '',
        url: '',
        // Data:function(gettime){
        //     var newtime =new Date(new Date().setHours(0,0,0,0));
        //     var timestamp = Date.parse(newtime);
        //     var timestamp=new Date().setHours(0,0,0,0);
        //     var timeout = Math.ceil((timestamp-gettime)/86400000);
        //     return timeout;
        // },
        timese: function (hisTV) {
            this.urls = hisTV;
        },
        sendJson: function (movieTv) {
            //        详情页分配数据
            //        电影电视剧
            //        num控制首次赛选  itemNo控制二次赛选
            //        if(this.op===0) return;  // 焦点在最左边，收藏与记录时，不让传数据 -----wzh
            if (leftheader.num == 0) {
                //          收藏数据
                if (leftheader.itemNo == 0) {
                    //            电视剧
                    var url = this.screen(['Detail_News'], movieTv);
                    this.urls = url;
                } else if (leftheader.itemNo == 1) {
                    //            电影
                    var url = this.screen(['Detail_Movie'], movieTv);
                    this.urls = url;
                }
                //  else if (leftheader.itemNo == 3) {
                //     //            萌宝
                //     var url = this.screen(['5544', '5550'], movieTv);
                //     this.urls = url;
                // } else if (leftheader.itemNo == 4) {
                //     //            知识
                //     var url = this.screen(['5545', '5551'], movieTv);
                //     this.urls = url;
                // } else if (leftheader.itemNo == 5) {
                //     //            故事
                //     var url = this.screen(['5546', '5552'], movieTv);
                //     this.urls = url;
                // } else if (leftheader.itemNo == 6) {
                //     //              娱乐
                //     var url = this.screen(['5547', '5553'], movieTv);
                //     this.urls = url;
                // } else if (leftheader.itemNo == 0) {
                //     //              推荐
                //     var url = this.screen(['6349', '5983'], movieTv);
                //     this.urls = url;
                // }
            }
        },
        //      筛选数据，jsonDa为类别参数,jsonDb为传入赛选数据
        screen: function (jsonDa, jsonDb) {
            var jsonObj = [];
            if (jsonDb) {
                for (var i = 0; i < jsonDb.length; i++) {
                    if (jsonDb[i].relateLayout == jsonDa) {
                        jsonObj.unshift(jsonDb[i]);
                    }
                }
            }
            return jsonObj;
        },

        getValue: function () {
            //          	获取url?
            var url = location.search; //获取url中"?"符后的字串  
            var theRequest = new Object();
            if (url.indexOf("?") != -1) {
                var str = url.substr(1);
                strs = str.split("&");
                for (var i = 0; i < strs.length; i++) {
                    theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
                }
            }
            return theRequest;
        },
        ifhistory: function () {
            var fav = window.Cookies.get('favColl');
            if (fav != undefined) {
                var itnum = window.Cookies.get('hisHomeName');
                var favNum = window.Cookies.get('favNum');
                var favNums = window.Cookies.get('favNums');
                leftheader.itemNo = itnum * 1;
                rightCenter.itemNo = favNum * 1;
                rightCenter.time = favNums * 1;

                if (fav == '收藏') {
                    leftheader.favinit(this.sc);
                    getJson.historyData(this.num, 2);
                    leftheader.num = 0;
                    $('#c' + leftheader.op).css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(-' + 70 * leftheader.num + 'px)'
                    });
                    $('#c' + (leftheader.op + 1)).css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(-' + 68 * leftheader.itemNo + 'px)'
                    })
                } else {
                    leftheader.favinit(this.jv);
                    getJson.historyData(this.num, 1);
                    leftheader.num = 1;
                    $('#c' + leftheader.op).css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(-' + 70 * leftheader.num + 'px)'
                    });
                    $('#c' + (leftheader.op + 1)).css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(-' + 68 * leftheader.itemNo + 'px)'
                    })
                }
                leftheader.op = 1;
                areaObj = rightCenter;
                $('#d1').removeClass('active');
                $('#b1').removeClass('changebac');
                $('.his_ul').css({
                    'transition': 'all 0.3s',
                    'transform': 'translateY(-' + 556 * rightCenter.time + 'px)'
                });

                window.Cookies.remove('favColl');
                setTimeout(function () {
                    // leftheader.removeBcss();
                    rightCenter.addCss();
                    var moveHeight = 400 / rightCenter.pagination;
                    $('.btn_nums').css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(' + moveHeight * rightCenter.time + 'px)'
                    });
                }, 500);
            } else {
                var fall = this.getValue().fall;
                if (fall == 5) {
                    leftheader.favinit(this.sc);
                    getJson.historyData(this.num, 2);
                    leftheader.num = 0;
                    $('#c' + leftheader.op).css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(-' + 70 * leftheader.num + 'px)'
                    });
                } else {
                    leftheader.favinit(this.jv);
                    getJson.historyData(this.num, 1);
                    leftheader.num = 1;
                    $('#c' + leftheader.op).css({
                        'transition': 'all 0.3s',
                        'transform': 'translateY(-' + 70 * leftheader.num + 'px)'
                    });
                }
                areaObj = leftheader;
            }
        },
    };
    //初始焦点赋值
    $(key.ifhistory());
    onKeyPress = function (keyCode) {
        switch (keyCode) {
            case "up": //上边
                areaObj.up();
                break;
            case "down": //下边
                areaObj.down();
                break;
            case "left": //左边
                areaObj.left();
                break;
            case "right": //右边
                areaObj.right();
                break;
            case "pageup":
                areaObj.pageup();
                break;
            case "pagedown":
                areaObj.pagedown();
                break;
            case "back":
                areaObj.back();
                break;
            case "enter":
                areaObj.enter();
                break;
            case "home":
                areaObj.home();
                break;
        }
    };
    //事件绑定
    document.onkeydown = grepEvent;
</script>

</html>